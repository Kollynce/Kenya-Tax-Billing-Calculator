"use strict";(self["webpackChunkmy_tax_calculator"]=self["webpackChunkmy_tax_calculator"]||[]).push([[940],{143:function(e,t,n){n.d(t,{$D:function(){return y},CD:function(){return g},ED:function(){return I},Ee:function(){return i},_U:function(){return r},vv:function(){return a},zD:function(){return p},zZ:function(){return m}});n(8111),n(8237);const r={PERSONAL_RELIEF:28800,NSSF_TIER_I_MAX:4320,NSSF_TIER_II_MAX:18e3,NSSF_RATE:.024,SHIF_RATE:.0275,SHIF_MIN_CONTRIBUTION:300,SHIF_MAX_CONTRIBUTION:5e3,HOUSING_LEVY_RATE:.015,VAT_RATE:.16,DIGITAL_SERVICE_TAX_RATE:.015,VAT_REGISTRATION_THRESHOLD:5e6,TAX_BRACKETS:[{min:0,max:24e3,rate:10},{min:24e3,max:32333,rate:25},{min:32333,max:5e5,rate:30},{min:5e5,max:8e5,rate:32.5},{min:8e5,max:null,rate:35}],NSSF_TIER_I_RATE:.024,NSSF_TIER_II_RATE:.024,INSURANCE_RELIEF_RATE:.15,INSURANCE_RELIEF_MAX_MONTHLY:5e3,HOUSING_RELIEF_RATE:.15,HOUSING_RELIEF_MAX_ANNUAL:108e3};function a(e){return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function i(e){return new Intl.NumberFormat("en-KE",{style:"percent",minimumFractionDigits:1,maximumFractionDigits:1}).format(e)}function o(e,{includeTierI:t=!0,includeTierII:n=!0}={}){const a=t?Math.min(e*r.NSSF_TIER_I_RATE,r.NSSF_TIER_I_MAX):0,i=n?Math.min(Math.max(0,e-r.NSSF_TIER_I_MAX)*r.NSSF_TIER_II_RATE,r.NSSF_TIER_II_MAX):0;return{tierI:a,tierII:i,total:a+i}}function s(e){const t=e*r.SHIF_RATE;return Math.min(Math.max(r.SHIF_MIN_CONTRIBUTION,t),r.SHIF_MAX_CONTRIBUTION)}function u(e){return e*r.HOUSING_LEVY_RATE}function l(e,t){const n=Math.min(Math.max(0,e-t.min),t.max?t.max-t.min:1/0);return n*t.rate}function c(e,t){return t.reduce(((t,n)=>t+l(e,n)),0)}function d(e){const t=e*r.INSURANCE_RELIEF_RATE;return Math.min(t,r.INSURANCE_RELIEF_MAX_MONTHLY)}function f(e){const t=12*e,n=Math.min(t*r.HOUSING_RELIEF_RATE,r.HOUSING_RELIEF_MAX_ANNUAL);return n/12}function m({annualIncome:e,includeNSSF:t=!0,includeSHIF:n=!0,includeHousingLevy:a=!0,taxRates:i,nssfTiers:l={includeTierI:!0,includeTierII:!0},personalRelief:m=r.PERSONAL_RELIEF,includePersonalRelief:I=!0,insurancePremium:g=0,includeInsuranceRelief:p=!1,housingContribution:y=0,includeHousingRelief:R=!1}){const _=e/12,E=o(_,l),h=t?E.total:0,b=n?s(_):0,S=a?u(_):0,T=I?m/12:0,x=p?d(Number(g)):0,A=R?f(Number(y)):0,N=T+x+A,v=12*h,C=12*b,w=12*S,F=12*N,L=e-(t?v:0),H=c(L,i.brackets),M=Math.max(0,H-F),k=M+v+C+w,O=e-k;return{grossIncome:e,taxableIncome:L,incomeTax:H,personalRelief:I?m:0,insuranceRelief:p?12*x:0,housingRelief:R?12*A:0,totalRelief:F,nssfContribution:v,nssfTierI:12*E.tierI,nssfTierII:12*E.tierII,shifContribution:C,housingLevy:w,taxAfterRelief:M,totalDeductions:k,netIncome:O,monthlyGross:_,monthlyNet:O/12,monthlyDeductions:k/12,effectiveTaxRate:k/e,payeTax:M,monthlyBreakdown:{grossPay:_,nssf:h,nssfTierI:E.tierI,nssfTierII:E.tierII,shif:b,housingLevy:S,taxableIncome:L/12,paye:M/12,personalRelief:T,insuranceRelief:x,housingRelief:A,totalRelief:N,netPay:O/12}}}function I(e,{includeNSSF:t=!0,includeSHIF:n=!0,includeHousingLevy:a=!0,taxRates:i,nssfTiers:o={includeTierI:!0,includeTierII:!0},personalRelief:s=r.PERSONAL_RELIEF,includePersonalRelief:u=!0,includeInsuranceRelief:l=!1,insurancePremium:c=0,includeHousingRelief:d=!1,housingContribution:f=0}={}){let I=e,g=3*e,p=0;const y=20,R=.01;while(p<y){const r=(I+g)/2,y=m({annualIncome:12*r,includeNSSF:t,includeSHIF:n,includeHousingLevy:a,taxRates:i,nssfTiers:o,personalRelief:s,includePersonalRelief:u,includeInsuranceRelief:l,insurancePremium:c,includeHousingRelief:d,housingContribution:f}),_=y.monthlyNet,E=_-e;if(Math.abs(E)<R)return 12*r;E>0?g=r:I=r,p++}return(I+g)/2*12}function g(e){const t=["January","February","March","April","May","June","July","August","September","October","November","December"];return t.map((t=>({name:t,gross:e.monthlyGross,deductions:e.monthlyDeductions,net:e.monthlyNet})))}function p(e){return{summary:{annualGrossIncome:e.grossIncome,annualNetIncome:e.netIncome,totalTax:e.taxAfterRelief,totalDeductions:e.totalDeductions,effectiveTaxRate:e.effectiveTaxRate},monthly:{grossIncome:e.monthlyGross,netIncome:e.monthlyNet,deductions:e.monthlyDeductions},deductions:{incomeTax:e.taxAfterRelief,nssf:e.nssfContribution,shif:e.shifContribution,personalRelief:e.personalRelief},breakdown:g(e)}}function y(e){return e*r.DIGITAL_SERVICE_TAX_RATE}},538:function(e,t,n){n.d(t,{Ak:function(){return c},EJ:function(){return f},HH:function(){return d},UE:function(){return l},tz:function(){return u}});n(8111),n(1701);var r=n(1394),a=n(7617);const i={TAX_RATES:"taxRates",CALCULATIONS:"calculations",SETTINGS:"settings"},o={year:2024,personalRelief:28800,brackets:[{min:0,max:288e3,rate:.1},{min:288e3,max:388e3,rate:.25},{min:388e3,max:6e6,rate:.3},{min:6e6,max:96e5,rate:.32},{min:96e5,max:null,rate:.35}]},s={currency:"KES",countryCode:"KE",taxYearStart:1,personalReliefEnabled:!0,nssfEnabled:!0,shifEnabled:!0};async function u(e){try{const t=(0,a.H9)(r.db,i.TAX_RATES,e.toString()),n=await(0,a.x7)(t);return n.exists()?n.data():o}catch(t){return console.warn("Error fetching tax rates:",t),o}}async function l(e,t){const n=(0,a.H9)((0,a.rJ)(r.db,i.CALCULATIONS));await(0,a.BN)(n,{userId:e,timestamp:new Date,...t})}async function c(e,t=10){const n=(0,a.P)((0,a.rJ)(r.db,i.CALCULATIONS),(0,a._M)("userId","==",e),(0,a.My)("timestamp","desc"),t(t)),o=await(0,a.GG)(n);return o.docs.map((e=>({id:e.id,...e.data()})))}async function d(){try{const e=(0,a.H9)(r.db,i.SETTINGS,"default"),t=await(0,a.x7)(e);return t.exists()?t.data():s}catch(e){return console.warn("Error fetching tax settings:",e),s}}async function f(e){const t=(new Date).getFullYear(),n=(0,a.H9)(r.db,i.TAX_RATES,t.toString());await(0,a.BN)(n,{...e,year:t,updatedAt:new Date})}},4090:function(e,t,n){n.d(t,{A:function(){return p}});var r=n(6768),a=n(4232);const i={class:"w-full"},o=["for"],s={class:"relative"},u=["id","type","value","placeholder","disabled","required"],l={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},c={key:1,class:"mt-1 text-sm text-red-600"},d={key:2,class:"mt-1 text-sm text-gray-500"};function f(e,t,n,f,m,I){return(0,r.uX)(),(0,r.CE)("div",i,[n.label?((0,r.uX)(),(0,r.CE)("label",{key:0,for:n.id,class:"block text-sm font-medium text-gray-700 mb-1"},(0,a.v_)(n.label),9,o)):(0,r.Q3)("",!0),(0,r.Lk)("div",s,[(0,r.Lk)("input",{id:n.id,type:n.type,value:n.modelValue,placeholder:n.placeholder,disabled:n.disabled,required:n.required,class:(0,a.C4)(["input-field",n.error?"input-error":"",n.disabled?"bg-gray-50 text-gray-500 cursor-not-allowed":"",n.rounded?"rounded-lg":"rounded-none"]),onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value)),onBlur:t[1]||(t[1]=t=>e.$emit("blur",t))},null,42,u),n.error?((0,r.uX)(),(0,r.CE)("div",l,t[2]||(t[2]=[(0,r.Lk)("svg",{class:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[(0,r.Lk)("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]))):(0,r.Q3)("",!0)]),n.error?((0,r.uX)(),(0,r.CE)("p",c,(0,a.v_)(n.error),1)):(0,r.Q3)("",!0),n.hint?((0,r.uX)(),(0,r.CE)("p",d,(0,a.v_)(n.hint),1)):(0,r.Q3)("",!0)])}var m={name:"InputField",props:{id:{type:String,required:!0},label:{type:String,default:""},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},error:{type:String,default:""},hint:{type:String,default:""},rounded:{type:Boolean,default:!0}},emits:["update:modelValue","blur"]},I=n(1241);const g=(0,I.A)(m,[["render",f],["__scopeId","data-v-b708b39a"]]);var p=g},8012:function(e,t,n){n.d(t,{A:function(){return c}});var r=n(6768),a=n(4232);const i=["type","disabled"];function o(e,t,n,o,s,u){return(0,r.uX)(),(0,r.CE)("button",{type:n.type,class:(0,a.C4)(["inline-flex items-center justify-center whitespace-nowrap rounded-md text-center","border font-medium shadow-sm w-auto transition-all duration-200 ease-in-out","disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2",u.sizeClasses,u.variantClasses,{"flex-nowrap":!n.allowWrap}]),disabled:n.disabled||n.loading,onClick:t[0]||(t[0]=t=>e.$emit("click",t))},[n.loading?((0,r.uX)(),(0,r.CE)("svg",{key:0,class:(0,a.C4)(["animate-spin flex-shrink-0 mr-2",u.iconSizeClass]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},t[1]||(t[1]=[(0,r.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),(0,r.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]),2)):(0,r.Q3)("",!0),(0,r.Lk)("span",{class:(0,a.C4)({truncate:n.truncateText})},[(0,r.RG)(e.$slots,"default",{},void 0,!0)],2),(0,r.RG)(e.$slots,"right-icon",{},void 0,!0)],10,i)}var s={name:"BaseButton",props:{type:{type:String,default:"button",validator:e=>["button","submit","reset"].includes(e)},variant:{type:String,default:"primary",validator:e=>["primary","secondary","gradient","white","outline","kenya"].includes(e)},size:{type:String,default:"default",validator:e=>["small","default","large"].includes(e)},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},allowWrap:{type:Boolean,default:!1},truncateText:{type:Boolean,default:!1},iconPosition:{type:String,default:"right",validator:e=>["left","right"].includes(e)}},computed:{variantClasses(){const e={primary:"border-transparent bg-green-600 text-white hover:bg-green-500 focus:ring-green-600",secondary:"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 hover:border-green-500 focus:ring-green-600",gradient:"border-transparent bg-gradient-to-r from-green-600 via-green-500 to-green-600 text-white hover:from-green-500 hover:via-green-400 hover:to-green-500 focus:ring-green-600 rounded-full",kenya:"border-transparent bg-green-600 text-white hover:bg-green-500 focus:ring-green-600",white:"border-transparent bg-white text-gray-900 hover:bg-gray-50 hover:text-green-600 focus:ring-green-600",outline:"border-green-600 bg-transparent text-green-600 hover:bg-green-50 focus:ring-green-600"};return e[this.variant]},sizeClasses(){const e={small:"px-3 py-1.5 text-sm gap-1.5",default:"px-4 py-2 text-sm gap-2",large:"px-6 py-3 text-base gap-2.5"};return e[this.size]},iconSizeClass(){const e={small:"h-3.5 w-3.5",default:"h-4 w-4",large:"h-5 w-5"};return e[this.size]}}},u=n(1241);const l=(0,u.A)(s,[["render",o],["__scopeId","data-v-7d8b5a0b"]]);var c=l}}]);
//# sourceMappingURL=940.3707331c.js.map