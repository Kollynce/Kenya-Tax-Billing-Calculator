"use strict";(self["webpackChunksanaapesa"]=self["webpackChunksanaapesa"]||[]).push([[271],{143:function(e,t,n){n.d(t,{$D:function(){return y},CD:function(){return I},ED:function(){return g},Ee:function(){return o},_U:function(){return r},qJ:function(){return a},vv:function(){return i},zD:function(){return h},zZ:function(){return p}});n(8111),n(8237);const r={PERSONAL_RELIEF:28800,NSSF_TIER_I_MAX:4320,NSSF_TIER_II_MAX:18e3,NSSF_RATE:.024,SHIF_RATE:.0275,SHIF_MIN_CONTRIBUTION:300,SHIF_MAX_CONTRIBUTION:5e3,HOUSING_LEVY_RATE:.015,VAT_RATE:.16,DIGITAL_SERVICE_TAX_RATE:.015,TAX_BRACKETS:[{min:0,max:24e3,rate:10},{min:24e3,max:32333,rate:25},{min:32333,max:5e5,rate:30},{min:5e5,max:8e5,rate:32.5},{min:8e5,max:null,rate:35}],NSSF_TIER_I_RATE:.024,NSSF_TIER_II_RATE:.024,INSURANCE_RELIEF_RATE:.15,INSURANCE_RELIEF_MAX_MONTHLY:5e3,HOUSING_RELIEF_RATE:.15,HOUSING_RELIEF_MAX_ANNUAL:108e3},a={MINIMUM_HOURLY_RATES:{designer:2500,writer:2e3,musician:2500,photographer:3e3,videographer:3500,"digital-artist":2800,animator:3e3,"voice-artist":2e3,"social-media":2e3,general:2e3}};const i=e=>{const t=Number(e);return isNaN(t)?"Ksh 0":`Ksh ${t.toLocaleString("en-KE",{minimumFractionDigits:0,maximumFractionDigits:0})}`};function o(e){return new Intl.NumberFormat("en-KE",{style:"percent",minimumFractionDigits:1,maximumFractionDigits:1}).format(e)}function l(e,{includeTierI:t=!0,includeTierII:n=!0}={}){const a=t?Math.min(e*r.NSSF_TIER_I_RATE,r.NSSF_TIER_I_MAX):0,i=n?Math.min(Math.max(0,e-r.NSSF_TIER_I_MAX)*r.NSSF_TIER_II_RATE,r.NSSF_TIER_II_MAX):0;return{tierI:a,tierII:i,total:a+i}}function u(e){const t=e*r.SHIF_RATE;return Math.min(Math.max(r.SHIF_MIN_CONTRIBUTION,t),r.SHIF_MAX_CONTRIBUTION)}function s(e){return e*r.HOUSING_LEVY_RATE}function c(e,t){const n=Math.min(Math.max(0,e-t.min),t.max?t.max-t.min:1/0);return n*t.rate}function d(e,t){return t.reduce(((t,n)=>t+c(e,n)),0)}function f(e){const t=e*r.INSURANCE_RELIEF_RATE;return Math.min(t,r.INSURANCE_RELIEF_MAX_MONTHLY)}function m(e){const t=12*e,n=Math.min(t*r.HOUSING_RELIEF_RATE,r.HOUSING_RELIEF_MAX_ANNUAL);return n/12}function p({annualIncome:e,includeNSSF:t=!0,includeSHIF:n=!0,includeHousingLevy:a=!0,taxRates:i,nssfTiers:o={includeTierI:!0,includeTierII:!0},personalRelief:c=r.PERSONAL_RELIEF,includePersonalRelief:p=!0,insurancePremium:g=0,includeInsuranceRelief:I=!1,housingContribution:h=0,includeHousingRelief:y=!1}){const R=e/12,E=l(R,o),_=t?E.total:0,b=n?u(R):0,S=a?s(R):0,T=p?c/12:0,x=I?f(Number(g)):0,v=y?m(Number(h)):0,N=T+x+v,A=12*_,w=12*b,C=12*S,L=12*N,F=e-(t?A:0),M=d(F,i.brackets),H=Math.max(0,M-L),k=H+A+w+C,B=e-k;return{grossIncome:e,taxableIncome:F,incomeTax:M,personalRelief:p?c:0,insuranceRelief:I?12*x:0,housingRelief:y?12*v:0,totalRelief:L,nssfContribution:A,nssfTierI:12*E.tierI,nssfTierII:12*E.tierII,shifContribution:w,housingLevy:C,taxAfterRelief:H,totalDeductions:k,netIncome:B,monthlyGross:R,monthlyNet:B/12,monthlyDeductions:k/12,effectiveTaxRate:k/e,payeTax:H,monthlyBreakdown:{grossPay:R,nssf:_,nssfTierI:E.tierI,nssfTierII:E.tierII,shif:b,housingLevy:S,taxableIncome:F/12,paye:H/12,personalRelief:T,insuranceRelief:x,housingRelief:v,totalRelief:N,netPay:B/12}}}function g(e,{includeNSSF:t=!0,includeSHIF:n=!0,includeHousingLevy:a=!0,taxRates:i,nssfTiers:o={includeTierI:!0,includeTierII:!0},personalRelief:l=r.PERSONAL_RELIEF,includePersonalRelief:u=!0,includeInsuranceRelief:s=!1,insurancePremium:c=0,includeHousingRelief:d=!1,housingContribution:f=0}={}){let m=e,g=3*e,I=0;const h=20,y=.01;while(I<h){const r=(m+g)/2,h=p({annualIncome:12*r,includeNSSF:t,includeSHIF:n,includeHousingLevy:a,taxRates:i,nssfTiers:o,personalRelief:l,includePersonalRelief:u,includeInsuranceRelief:s,insurancePremium:c,includeHousingRelief:d,housingContribution:f}),R=h.monthlyNet,E=R-e;if(Math.abs(E)<y)return 12*r;E>0?g=r:m=r,I++}return(m+g)/2*12}function I(e){const t=["January","February","March","April","May","June","July","August","September","October","November","December"];return t.map((t=>({name:t,gross:e.monthlyGross,deductions:e.monthlyDeductions,net:e.monthlyNet})))}function h(e){return{summary:{annualGrossIncome:e.grossIncome,annualNetIncome:e.netIncome,totalTax:e.taxAfterRelief,totalDeductions:e.totalDeductions,effectiveTaxRate:e.effectiveTaxRate},monthly:{grossIncome:e.monthlyGross,netIncome:e.monthlyNet,deductions:e.monthlyDeductions},deductions:{incomeTax:e.taxAfterRelief,nssf:e.nssfContribution,shif:e.shifContribution,personalRelief:e.personalRelief},breakdown:I(e)}}function y(e){return e*r.DIGITAL_SERVICE_TAX_RATE}},513:function(e,t,n){n.d(t,{A:function(){return h}});var r=n(6768),a=n(4232);const i={class:"w-full"},o=["for"],l={class:"relative"},u=["id","type","value","placeholder","disabled","required"],s={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},c={key:1,class:"mt-1 text-sm text-red-600"},d={key:2,class:"mt-1 text-sm text-gray-500"};function f(e,t,n,f,m,p){return(0,r.uX)(),(0,r.CE)("div",i,[n.label?((0,r.uX)(),(0,r.CE)("label",{key:0,for:n.id,class:"block text-sm font-medium text-gray-700 mb-1"},(0,a.v_)(n.label),9,o)):(0,r.Q3)("",!0),(0,r.Lk)("div",l,[(0,r.Lk)("input",{id:n.id,type:f.actualType,value:f.displayValue,placeholder:n.placeholder,disabled:n.disabled,required:n.required,class:(0,a.C4)(["input-field",n.error?"input-error":"",n.disabled?"bg-gray-50 text-gray-500 cursor-not-allowed":"",e.rounded?"rounded-lg":"rounded-none"]),onInput:t[0]||(t[0]=(...e)=>f.handleInput&&f.handleInput(...e)),onBlur:t[1]||(t[1]=(...e)=>f.handleBlur&&f.handleBlur(...e))},null,42,u),n.error?((0,r.uX)(),(0,r.CE)("div",s,t[2]||(t[2]=[(0,r.Lk)("svg",{class:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[(0,r.Lk)("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]))):(0,r.Q3)("",!0)]),n.error?((0,r.uX)(),(0,r.CE)("p",c,(0,a.v_)(n.error),1)):(0,r.Q3)("",!0),e.hint?((0,r.uX)(),(0,r.CE)("p",d,(0,a.v_)(e.hint),1)):(0,r.Q3)("",!0)])}var m=n(144),p={name:"InputField",props:{id:{type:String,required:!0},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},error:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},formatNumber:{type:Boolean,default:!1},decimalPlaces:{type:Number,default:2}},emits:["update:modelValue","input"],setup(e,{emit:t}){const n=(0,m.KR)(e.modelValue),a=t=>{if(""===t||null===t||void 0===t)return"";let n=String(t).replace(/,/g,""),r=n.split("."),a=r[0],i=r.length>1?r[1]:"",o=a.replace(/\B(?=(\d{3})+(?!\d))/g,",");return e.decimalPlaces>0&&r.length>1?(i=i.padEnd(e.decimalPlaces,"0").slice(0,e.decimalPlaces),`${o}.${i}`):o},i=(0,r.EW)((()=>e.formatNumber&&""!==n.value?a(n.value):n.value)),o=(0,r.EW)((()=>e.formatNumber?"text":e.type)),l=r=>{let a=r.target.value;if(e.formatNumber){let r=a.replace(/,/g,"");if("number"===e.type&&""!==r&&!/^-?\d*\.?\d*$/.test(r))return;n.value=r,t("update:modelValue",r),t("input",r)}else n.value=a,t("update:modelValue",a),t("input",a)},u=()=>{e.formatNumber&&""!==n.value&&t("update:modelValue",n.value)};return(0,r.wB)((()=>e.modelValue),(e=>{n.value=e})),{inputValue:n,displayValue:i,actualType:o,handleInput:l,handleBlur:u}}},g=n(1241);const I=(0,g.A)(p,[["render",f],["__scopeId","data-v-7250fa50"]]);var h=I},538:function(e,t,n){n.d(t,{Ak:function(){return c},EJ:function(){return f},HH:function(){return d},UE:function(){return s},tz:function(){return u}});n(8111),n(1701);var r=n(1394),a=n(7617);const i={TAX_RATES:"taxRates",CALCULATIONS:"calculations",SETTINGS:"settings"},o={year:2024,personalRelief:28800,brackets:[{min:0,max:288e3,rate:.1},{min:288e3,max:388e3,rate:.25},{min:388e3,max:6e6,rate:.3},{min:6e6,max:96e5,rate:.32},{min:96e5,max:null,rate:.35}]},l={currency:"KES",countryCode:"KE",taxYearStart:1,personalReliefEnabled:!0,nssfEnabled:!0,shifEnabled:!0};async function u(e){try{const t=(0,a.H9)(r.db,i.TAX_RATES,e.toString()),n=await(0,a.x7)(t);return n.exists()?n.data():o}catch(t){return console.warn("Error fetching tax rates:",t),o}}async function s(e,t){const n=(0,a.H9)((0,a.rJ)(r.db,i.CALCULATIONS));await(0,a.BN)(n,{userId:e,timestamp:new Date,...t})}async function c(e,t=10){const n=(0,a.P)((0,a.rJ)(r.db,i.CALCULATIONS),(0,a._M)("userId","==",e),(0,a.My)("timestamp","desc"),t(t)),o=await(0,a.GG)(n);return o.docs.map((e=>({id:e.id,...e.data()})))}async function d(){try{const e=(0,a.H9)(r.db,i.SETTINGS,"default"),t=await(0,a.x7)(e);return t.exists()?t.data():l}catch(e){return console.warn("Error fetching tax settings:",e),l}}async function f(e){const t=(new Date).getFullYear(),n=(0,a.H9)(r.db,i.TAX_RATES,t.toString());await(0,a.BN)(n,{...e,year:t,updatedAt:new Date})}},8012:function(e,t,n){n.d(t,{A:function(){return c}});var r=n(6768),a=n(4232);const i=["type","disabled"];function o(e,t,n,o,l,u){return(0,r.uX)(),(0,r.CE)("button",{type:n.type,class:(0,a.C4)(["inline-flex items-center justify-center whitespace-nowrap rounded-md text-center","border font-medium shadow-sm w-auto transition-all duration-200 ease-in-out","disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2",u.sizeClasses,u.variantClasses,{"flex-nowrap":!n.allowWrap}]),disabled:n.disabled||n.loading,onClick:t[0]||(t[0]=t=>e.$emit("click",t))},[n.loading?((0,r.uX)(),(0,r.CE)("svg",{key:0,class:(0,a.C4)(["animate-spin flex-shrink-0 mr-2",u.iconSizeClass]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},t[1]||(t[1]=[(0,r.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),(0,r.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]),2)):(0,r.Q3)("",!0),(0,r.Lk)("span",{class:(0,a.C4)({truncate:n.truncateText})},[(0,r.RG)(e.$slots,"default",{},void 0,!0)],2),(0,r.RG)(e.$slots,"right-icon",{},void 0,!0)],10,i)}var l={name:"BaseButton",props:{type:{type:String,default:"button",validator:e=>["button","submit","reset"].includes(e)},variant:{type:String,default:"primary",validator:e=>["primary","secondary","gradient","white","outline","kenya"].includes(e)},size:{type:String,default:"default",validator:e=>["small","default","large"].includes(e)},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},allowWrap:{type:Boolean,default:!1},truncateText:{type:Boolean,default:!1},iconPosition:{type:String,default:"right",validator:e=>["left","right"].includes(e)}},computed:{variantClasses(){const e={primary:"border-transparent bg-green-600 text-white hover:bg-green-500 focus:ring-green-600",secondary:"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 hover:border-green-500 focus:ring-green-600",gradient:"border-transparent bg-gradient-to-r from-green-600 via-green-500 to-green-600 text-white hover:from-green-500 hover:via-green-400 hover:to-green-500 focus:ring-green-600 rounded-full",kenya:"border-transparent bg-green-600 text-white hover:bg-green-500 focus:ring-green-600",white:"border-transparent bg-white text-gray-900 hover:bg-gray-50 hover:text-green-600 focus:ring-green-600",outline:"border-green-600 bg-transparent text-green-600 hover:bg-green-50 focus:ring-green-600"};return e[this.variant]},sizeClasses(){const e={small:"px-3 py-1.5 text-sm gap-1.5",default:"px-4 py-2 text-sm gap-2",large:"px-6 py-3 text-base gap-2.5"};return e[this.size]},iconSizeClass(){const e={small:"h-3.5 w-3.5",default:"h-4 w-4",large:"h-5 w-5"};return e[this.size]}}},u=n(1241);const s=(0,u.A)(l,[["render",o],["__scopeId","data-v-7d8b5a0b"]]);var c=s}}]);
//# sourceMappingURL=271.f70a448c.js.map